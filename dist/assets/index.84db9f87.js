import{s as o,e,T as h,l as d,y as p,d as w,A as y,a as g,b,c as N,f as C,g as F,B as k}from"./vendor.25a373ac.js";const E=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=s(l);fetch(l.href,i)}};E();const j={height:"100vh",width:"100vw",position:"fixed",top:0,left:0},L={entering:{visibility:"visible"},entered:{visibility:"visible"},exiting:{visibility:"visible"},exited:{visibility:"hidden"}},D={height:"100vh",width:"100%",backgroundColor:"rgba(0, 0, 0, .3)",transition:"opacity 400ms cubic-bezier(0.165, 0.840, 0.440, 1.000)"},A={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}},O={height:"100%",width:"100%",transition:"transform 400ms cubic-bezier(0.165, 0.840, 0.440, 1.000)"},R={entering:{transform:"translateY(0%)"},entered:{transform:"translateY(0%)"},exiting:{transform:"translateY(50%)"},exited:{transform:"translateY(50%)"}},v=({children:t,isOpen:n,onClose:s})=>{const r=o(null),l=o(null),i=o(null);return e(h,{in:n,timeout:400,nodeRef:r,children:a=>e("div",{ref:r,style:{...j,...L[a]},children:e(h,{in:n,timeout:400,nodeRef:l,children:u=>e("div",{ref:l,style:{...D,...A[u]},children:e(h,{in:n,timeout:400,nodeRef:i,children:f=>e("div",{ref:i,style:{...O,...R[f]},children:t})})})})})})},B=({})=>{const[t,n]=d(!1),s=()=>n(!1);return e("div",{className:"w-screen h-16 px-4 fixed inset-0 flex justify-between items-center z-10",children:[e("div",{className:"text-white",children:e("div",{className:"flex justify-center items-baseline",children:[e("svg",{className:"inline",height:"24",viewBox:"0 0 102 39",fill:"",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{d:"M22.3431 26.5747H32.9367L19.5976 0L4.33245 30.4093L0 39H10.5953L14.0837 32.0841L19.5976 21.1093L22.3431 26.5747Z",fill:"#ffffff"}),e("path",{d:"M42.2637 2.21238C36.4344 2.21238 31.6923 7.04446 31.6923 12.9922V13.1812C31.6782 15.3523 32.3212 17.4754 33.5342 19.2636C33.9209 19.8771 34.3717 20.4464 34.8789 20.9617L34.8976 20.9807C36.8686 22.9286 39.5129 24.0152 42.2637 24.0076H54.0498C54.7537 24.0135 55.4271 24.2999 55.925 24.8051C56.4228 25.3103 56.7052 25.9938 56.7112 26.7084C56.7019 27.4219 56.4185 28.1036 55.9214 28.6081C55.4243 29.1126 54.7527 29.4 54.0498 29.4092L19.3698 29.5032L14.7152 38.9586H54.383C54.4306 38.9482 54.4995 38.9327 54.5811 38.9128C59.5255 37.729 65.7951 33.079 66.1121 26.7886C66.2864 23.332 64.606 20.5251 63.3922 18.9365L63.3284 18.8554L63.2553 18.7812C63.2426 18.7683 63.206 18.7234 63.1796 18.6949C63.115 18.6155 63.0284 18.5111 62.9179 18.3946C61.785 17.1411 60.4081 16.1401 58.8742 15.4551C57.3403 14.77 55.683 14.4159 54.0073 14.4151H42.2637C41.9549 14.4111 41.6598 14.2848 41.4413 14.0632C41.2229 13.8416 41.0983 13.5421 41.0941 13.2286V13.0388C41.0996 12.725 41.2252 12.4257 41.4443 12.2042C41.6634 11.9828 41.9588 11.8566 42.2679 11.8524L97.2502 11.7186L102 2.25639L42.2637 2.21238Z",fill:"#ffffff"}),e("path",{d:"M68.2108 25.3762V38.9586H77.6339L77.6603 25.3762C77.6642 25.0627 77.7886 24.7631 78.0069 24.5414C78.2252 24.3196 78.5202 24.1931 78.829 24.1888H90.9908L95.8052 14.5972H78.7823C72.953 14.5972 68.2108 19.4327 68.2108 25.3762Z",fill:"#ffffff"})]}),e("span",{className:"ml-1 text-xl tracking-wider relative bottom-0.5",children:"\u641C\u56FE\u59EC"})]})}),e("div",{children:[e("button",{onClick:()=>n(!0),className:"m-4 text-white",children:e(y,{className:"inline",size:24})}),e(v,{isOpen:t,onClose:s,children:e("div",{className:"w-full h-full flex flex-col justify-end md:justify-center items-center",onClick:l=>{l.target===l.currentTarget&&s()},children:e("div",{className:"w-full h-[85vh] max-w-[40rem] max-h-[40rem] bg-white shadow-md rounded-2xl md:rounded",children:e("div",{className:"w-full h-full flex flex-col items-center divide-y-2",children:[e("div",{className:"w-full flex justify-between items-center",children:[e("h2",{className:"p-4 font-bold",children:"\u641C\u56FE\u59EC\u4ECB\u7ECD"}),e("button",{className:"w-14 h-14 flex justify-center items-center focus:outline-none",onClick:s,onKeyDown:s,children:e(g,{size:18})})]}),e("div",{className:"w-full overflow-y-scroll flex flex-col justify-center items-center",children:e("div",{className:"w-full",children:[e("div",{className:"p-4 m-4 rounded-xl bg-sky-200 shadow",children:[e("p",{className:"mb-1",children:"\u672C\u7F51\u7AD9\u7528\u4E8E\u641C\u7D22 A-SOUL B\u7AD9\u76F8\u5173Tag\u4E0B\u7684\u52A8\u6001\u56FE\u7247"}),e("p",{className:"mb-1",children:"\u56FE\u7247\u641C\u7D22\u7B97\u6CD5\u4E3ApHash\uFF0C\u6240\u4EE5\u6709\u65F6\u641C\u5230\u7684\u56FE\u4F1A\u4E0D\u592A\u51C6\u786E\uFF0C\u671B\u8C05\u89E3\uFF01"})]}),e("div",{className:"p-4 m-4 rounded-xl bg-indigo-200 shadow",children:e("p",{className:"mb-1",children:["\u4F5C\u8005\uFF1A",e("a",{href:"https://space.bilibili.com/32957695",target:"_blank",className:"hover:underline",children:"\u6653\u8F69iMIKU"})]})})]})})]})})})})]})]})},I=({children:t})=>e("div",{className:"w-screen h-screen overflow-hidden bg-gradient-to-br from-pink-500 via-red-500 to-yellow-500",children:e("div",{className:"w-full h-full flex justify-center items-center",children:e("div",{className:"w-5/6 h-full max-w-[48rem] max-h-[40rem] flex flex-col justify-center items-center",children:t})})}),M=({file:t,setFile:n})=>{const s=b(()=>t?URL.createObjectURL(t):"#",[t]);return e("div",{className:"w-full h-full relative",children:[e("img",{className:"w-full h-full object-contain",id:"preview",src:s,alt:"your image"}),e("div",{className:"w-full h-full absolute inset-0",children:e(N,{className:"cursor-pointer fill-orange-400 bg-orange-200 rounded-full absolute -top-[14px] -right-[14px]",size:28,onClick:()=>n(null)})})]})},T=({file:t,setFile:n})=>{const s=o(null);return p(()=>{const l=s.current;l&&!t&&(l.value="")},[t,s]),e("label",{className:"block w-full h-full flex justify-center items-center cursor-pointer",htmlFor:"image-upload",onDragOver:l=>{l.preventDefault(),l.stopPropagation()},onDrop:l=>{l.preventDefault(),l.stopPropagation(),n(l.dataTransfer.files[0])},children:[e("input",{type:"file",id:"image-upload",accept:"image/*",style:{display:"none"},onChange:l=>{const i=l.target.files;i&&i.length>0&&n(i[0])},ref:s}),e("div",{className:"w-[6rem] fill-white",children:e(C,{className:"fill-white",size:96})})]})},_=({children:t})=>e("div",{className:"w-[20rem] h-[20rem] aspect-square border-2 border-dashed border-white flex flex-col justify-center items-center",children:t}),x=({progress:t})=>e("div",{className:"w-12 h-12 relative",children:[e("svg",{className:"-rotate-90",width:"100%",height:"100%",viewBox:"0 0 120 120",children:[e("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#e6e6e6",strokeWidth:"12"}),e("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#f77a52",strokeWidth:"12",pathLength:"100",strokeDasharray:100,strokeDashoffset:100-t})]}),e("div",{className:"w-full h-full absolute inset-0 flex justify-center items-center",children:e("span",{className:"text-orange-700 text-[12px]",children:`${t.toFixed(0)}%`})})]}),S=({res:t})=>e("div",{className:"w-full h-full",children:t.data.map(n=>e("div",{className:"m-4 bg-orange-200 rounded-xl overflow-hidden shadow flex",children:[e("div",{className:"flex-none w-24 h-24 relative",children:e("img",{src:n.detail.src_url+"@96w_96h_1c_100q.webp",alt:""})}),e("div",{className:"p-2 flex-auto flex flex-col justify-between",children:[e("p",{className:"mt-1 line-clamp-2 break-all text-sm text-orange-700 hover:underline underline-offset-2",children:e("a",{href:`https://t.bilibili.com/${n.detail.dynamic_id}`,target:"_blank",children:[e("span",{className:"font-bold",children:["@",n.detail.author_name,": "]}),e("span",{className:"",children:n.detail.content})]})}),e("div",{className:"flex justify-between items-center",children:e("a",{className:"text-orange-700 text-sm",href:n.detail.src_url,target:"_blank",children:[e(F,{className:"inline",size:18}),e("span",{className:"relative top-[1px]",children:"\u9AD8\u6E05\u539F\u56FE"})]})})]}),e("div",{className:"flex-none w-[4rem] h-24 relative flex justify-center items-center",children:e(x,{progress:n.similarity*100})})]},n.detail.dynamic_id))}),U=({res:t})=>e("div",{className:"w-full h-full p-4",children:e("div",{className:"p-4 bg-red-200 rounded-xl text-red-500",children:t.message})}),z=({})=>e("div",{className:"w-full h-full",children:[0,1,2,3].map((t,n)=>e("div",{className:"animate-pulse m-4 bg-orange-200 rounded-xl overflow-hidden shadow flex",children:[e("div",{className:"flex-none w-24 h-24 bg-orange-100"}),e("div",{className:"flex-auto flex",children:[e("div",{className:"p-4 flex-auto flex flex-col justify-between",children:[e("div",{className:"",children:[e("p",{className:"h-2 my-2 bg-orange-300"}),e("p",{className:"h-2 my-2 bg-orange-300"})]}),e("div",{className:"",children:e("p",{className:"w-12 h-2 my-2 bg-orange-300"})})]}),e("div",{className:"flex-none flex w-[4rem] h-24 justify-center items-center",children:e(x,{progress:0})})]})]},n))}),H=({isOpen:t,onClose:n,children:s})=>e(v,{isOpen:t,onClose:n,children:e("div",{className:"w-full h-full flex flex-col justify-end md:justify-center items-center",onClick:l=>{l.target===l.currentTarget&&n()},children:e("div",{className:"w-full h-[85vh] max-w-[40rem] max-h-[40rem] bg-white shadow-md rounded-t-2xl md:rounded",children:e("div",{className:"w-full h-full flex flex-col items-center divide-y-2",children:[e("div",{className:"w-full flex justify-between items-center",children:[e("h2",{className:"p-4 font-bold",children:"\u641C\u7D22\u7ED3\u679C"}),e("button",{className:"w-14 h-14 flex justify-center items-center focus:outline-none",onClick:n,onKeyDown:n,children:e(g,{size:18})})]}),e("div",{className:"w-full overflow-y-scroll flex flex-col justify-center items-center",children:s})]})})})}),P="https://picsearch.asoulfan.com/api/uploadfile",K=()=>{const[t,n]=d(null),[s,r]=d(!1),[l,i]=d(null),a=()=>{i(null),r(!1)},u=()=>{t&&!s?(i(null),r(!0)):alert("\u8BF7\u9009\u62E9\u56FE\u7247\uFF01")};return p(()=>{if(t&&s){const f="POST",m=new FormData;m.append("file",t),fetch(P,{method:f,body:m}).then(c=>c.json()).then(c=>i(c)).catch(c=>{i({code:0,message:"\u670D\u52A1\u5668\u9047\u5230\u4E86\u4E00\u4E9B\u95EE\u9898"})})}},[t,s]),e(w,{children:[e(B,{}),e(I,{children:[e(_,{children:t?e(M,{file:t,setFile:n}):e(T,{file:t,setFile:n})}),e("div",{className:"my-4 flex justify-center items-center",children:e("button",{className:" px-8 py-2 mx-2 text-orange-600 bg-white border-2 border-white rounded-full",onClick:u,children:"\u641C\u7D22\u51FA\u5904"})}),t&&e(H,{isOpen:s,onClose:a,children:l?"data"in l?e(S,{res:l}):e(U,{res:l}):e(z,{})})]})]})};const W=document.getElementById("react-app");k(e(K,{}),W);
